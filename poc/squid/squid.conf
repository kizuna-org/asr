# Simple Squid configuration for FRP client proxy

# アクセスコントロールリスト (ACL) 定義
acl localnet src 10.0.0.0/8
acl localnet src 172.16.0.0/12
acl localnet src 192.168.0.0/16
acl localnet src fc00::/7
acl localnet src fe80::/10

# CONNECT method for HTTPS
acl CONNECT method CONNECT

# ルール：ローカルネットワークからの全てのアクセスを許可
http_access allow localnet
http_access allow localhost

# デフォルトでは拒否
http_access deny all

# HTTPプロキシのポート設定
http_port 3128

# キャッシュ設定を無効化（プロキシとしてのみ動作）
cache deny all

# ログ設定
access_log /var/log/squid/access.log
cache_log /var/log/squid/cache.log

# タイムアウト設定
connect_timeout 30 seconds
read_timeout 30 seconds

# メモリ使用量制限
cache_mem 32 MB

# 最大オブジェクトサイズ（キャッシュしない）
maximum_object_size 0 KB 
